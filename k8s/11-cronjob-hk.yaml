apiVersion: batch/v1
kind: CronJob
metadata:
  name: hk-rss
  namespace: news
spec:
  schedule: "5 0 * * *"          # 매일 09:05 KST
  jobTemplate:
    spec:
      template:
        spec:
          serviceAccountName: rss-bot
          nodeSelector:
            kubernetes.io/hostname: news-dsc    # 한국경제 -> datasec node
          restartPolicy: OnFailure
          containers:
            - name: collector
              image: docker.io/r0l3er7/news-collector:latest
              args: ["hankyung_it"]
              env:
                - name: GITHUB_REPO
                  value: "pinksour/kubepresso"
                - name: GITHUB_TOKEN
                  valueFrom:
                    secretKeyRef:
                      name: github-pat
                      key: token

